

 <div (click)="cancelvaripopup()"  *ngIf="alert" class="backdrop "></div>
 <div *ngIf="alert" class="alert-box">

  <div class="alert-details">
    <h3 >Add variations</h3>


  <!-- part one -->

  <div class="vari">
    <span *ngIf="vari1added">
      <div class="variadd">
        <div class="left">
          <ul>
            <li> <p>{{this.product.vari1.name}}</p></li>
            <li> <a (click)="renamevari1()">Rename</a></li>
            <li> <a (click)="deletevariname1()">Delete</a></li>
          </ul>

          <div class="inputs">
            <input type="checkbox" value="hasprice1" (change)="onFeatureToggle($event)" [checked]="product.hasprice1 == 'true'" id="hasprice1" name="hasprice" >
            <label class="lables" for="hasprice1">Prices vary for each {{product.vari1.name}}</label>
          </div>

          <div class="inputs">
            <input type="checkbox" value="hasquantity1" (change)="onFeatureToggle($event)" [checked]="product.hasquantity1 == 'true'" id="hasquantity1" name="hasquantity">
            <label  class="lables" for="hasquantity1">Quantities vary for each {{product.vari1.name}}</label>
          </div>

          <div class="inputs">
            <input type="checkbox" value="hassku1" (change)="onFeatureToggle($event)" [checked]="product.hassku1 == 'true'" id="hassku1" name="hassku1">
            <label  class="lables" for="hassku1">SKU vary for each {{product.vari1.name}}</label>
          </div>


        </div>
        <div class="right">
          <div class="flexContainer justifyleft">
            <input [(ngModel)]="values1.name" type="text" placeholder="Name the options" class="inputField">
            <button (click)="addvari1()">ADD</button>
          </div>

          <div class="flexContainer justifyleft sminput" *ngFor="let item of product.vari1.values ; let i = index ">
            <input value="{{item.name}}" type="text" disabled placeholder="Name the options" class="inputField">
            <button (click)="deletevari1(i)"><i class="fa fa-times" aria-hidden="true"></i></button>
          </div>

        </div>
      </div>
    </span>
    <span *ngIf="!vari1added">
      <label for="">Add a variation(1st)</label>
      <div class="flexContainer">
        <input [(ngModel)]="product.vari1.name" type="text" placeholder="Name the variation" class="inputField">
        <button (click)="addvariation1()">ADD</button>
      </div>
    </span>
  </div>




   <!-- part two -->


  <div class="vari" *ngIf="vari1added">
    <span *ngIf="vari2added">
      <div class="variadd">
        <div class="left">
          <ul>
            <li> <p>{{this.product.vari2.name}}</p></li>
            <li> <a (click)="renamevari2()">Rename</a></li>
            <li> <a (click)="deletevariname2()">Delete</a></li>
          </ul>

          <div class="inputs">
            <input type="checkbox"  value="hasprice2" (change)="onFeatureToggle($event)" [checked]="product.hasprice2 == 'true'" id="hasprice2" name="hasprice" >
            <label class="lables" for="hasprice2">Prices vary for each {{product.vari2.name}}</label>
          </div>

          <div class="inputs">
            <input type="checkbox"  value="hasquantity2" (change)="onFeatureToggle($event)" [checked]="product.hasquantity2 == 'true'" id="hasquantity2" name="hasquantity">
            <label  class="lables" for="hasquantity2">Quantities vary for each {{product.vari2.name}}</label>
          </div>


          <div class="inputs">
            <input type="checkbox"  value="hassku2" (change)="onFeatureToggle($event)" [checked]="product.hassku2 == 'true'" id="hassku2" name="hassku2">
            <label  class="lables" for="hassku2">SKU vary for each {{product.vari2.name}}</label>
          </div>


        </div>
        <div class="right">
          <div class="flexContainer justifyleft">
            <input [(ngModel)]="values2.name" type="text" placeholder="Name the options" class="inputField">
            <button (click)="addvari2()">ADD</button>
          </div>

          <div class="flexContainer justifyleft sminput" *ngFor="let item of product.vari2.values ; let i = index ">
            <input value="{{item.name}}" type="text" disabled placeholder="Name the options" class="inputField">
            <button (click)="deletevari2(i)"><i class="fa fa-times" aria-hidden="true"></i></button>
          </div>

        </div>
      </div>
    </span>
    <span *ngIf="!vari2added">
      <label for="">Add a variation(2nd)</label>
      <div class="flexContainer">
        <input [(ngModel)]="product.vari2.name" type="text" placeholder="Name the variation" class="inputField">
        <button (click)="addvariation2()">ADD</button>
      </div>
    </span>
  </div>




  <div class="alert-footer">
    <button (click)="cancelvaripopup()">Cancel</button>
    <button *ngIf="vari1added" [disabled]="disabledbtn" (click)="saveandcontinue()">Save and Continue</button>
  </div>
  </div>
 </div>


<div class="row">





<!-- Variations Section -->
  <div class="column">
    <div class="title">
      <h1>Variations</h1>
      <button *ngIf="vari1added" (click)="alerttoggle()">Edit</button>
    </div>

    <div class="details2">

      <button *ngIf="!vari1added" (click)="alerttoggle()">Add variations</button>


      <!-- variation one -->

      <div class="variations" *ngIf="vari1added && !pricemixedvari && !quantitymixedvari && !skumixedvari">
        <h4>{{product.vari1.name}}</h4>
        <h1 *ngIf="product.vari1.values.length == 0">No Variation</h1>
        <table  *ngIf="product.vari1.values.length > 0">
          <tr>


            <th>Options</th>
            <th *ngIf="product.hasprice1 == 'true' ">
              Price
            </th>
            <th *ngIf="product.hasquantity1 == 'true' ">
              Quantity
            </th>
            <th *ngIf="product.hassku1 == 'true' ">
              Sku
            </th>
          </tr>
          <tr *ngFor="let item of product.vari1.values ; let i = index">
            <td class="td">{{item.name}}</td>
            <td *ngIf="product.hasprice1 == 'true' ">
              <input
              [(ngModel)]="product.vari1.values[i].price"
              required
              placeholder="Original Price"
              name="orgprice"
              oninput="this.value =
              !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : null"
              type="number" />
            </td>
            <td *ngIf="product.hasquantity1 == 'true' ">
              <input
          [(ngModel)]="product.vari1.values[i].quantity"
          required
          placeholder="Original Price"
          name="orgprice"
          oninput="this.value =
          !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : null"
          type="number" />
            </td>
          <td *ngIf="product.hassku1 == 'true' ">
          <input
          [(ngModel)]="product.vari1.values[i].sku"
          required
          placeholder="hassku1"
          name="hassku1"
          type="text" />
            </td>
          </tr>

        </table>

      </div>


      <!-- variation 2 -->


      <div class="variations margin" *ngIf="vari2added && !pricemixedvari && !quantitymixedvari && !skumixedvari">
        <h4>{{product.vari2.name}}</h4>
        <h1 *ngIf="product.vari2.values.length == 0">No Variation</h1>
        <table *ngIf="product.vari2.values.length > 0">
          <tr>
            <th>Options</th>
            <th *ngIf="product.hasprice2 == 'true' ">Price</th>
            <th *ngIf="product.hasquantity2 == 'true' ">Quantity</th>
            <th *ngIf="product.hassku2 == 'true' ">
              Sku
            </th>
          </tr>
          <tr *ngFor="let item of product.vari2.values ; let i = index">
            <td class="td">{{item.name}}</td>
            <td *ngIf="product.hasprice2 == 'true' ">
              <input
              [(ngModel)]="product.vari2.values[i].price"
              required
              placeholder="Original Price"
              name="orgprice"
              oninput="this.value =
              !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : null"
              type="number" />
            </td>
            <td *ngIf="product.hasquantity2 == 'true' ">
              <input
          [(ngModel)]="product.vari2.values[i].quantity"
          required
          placeholder="Original Price"
          name="orgprice"
          oninput="this.value =
          !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : null"
          type="number" />
            </td>
            <td *ngIf="product.hassku2 == 'true' ">
            <input
              [(ngModel)]="product.vari2.values[i].sku"
              required
              placeholder="hassku2"
              name="hassku2"
              type="text" />
            </td>
          </tr>

        </table>

      </div>



      <!-- multi variation start -->


      <div class="variations" *ngIf="pricemixedvari && saved || quantitymixedvari && saved || skumixedvari && saved">

        <h1 *ngIf="product.mixedvari.values.length == 0">No Variation</h1>

        <table *ngIf="product.mixedvari.values.length > 0">
          <tr>
            <th>{{product.mixedvari.vari1}}</th>
            <th>{{product.mixedvari.vari2}}</th>
            <th *ngIf="product.hasprice1 == 'true' || product.hasprice2 == 'true' ">Price</th>
            <th *ngIf="product.hasquantity1 == 'true' || product.hasquantity2 == 'true' ">Quantity</th>
            <th *ngIf="product.hassku1 == 'true' || product.hassku2 == 'true' ">Sku</th>

          </tr>

          <tr *ngFor="let item of product.mixedvari.values ; let i = index">
            <td class="td">{{item.vari1name}}</td>
            <td class="td">{{item.vari2name}}</td>

            <td *ngIf="product.hasprice1 == 'true' || product.hasprice2 == 'true'  ">
              <input
              (change)="inputchange()"
              [(ngModel)]="product.mixedvari.values[i].price"
              required
              placeholder="Original Price"
              name="orgprice"
              oninput="this.value =
              !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : null"
              type="number" />
            </td>
            <td *ngIf="product.hasquantity1 == 'true' || product.hasquantity2 == 'true'">
            <input
            (change)="inputchange()"
            [(ngModel)]="product.mixedvari.values[i].quantity"
          required
          placeholder="Original Price"
          name="orgprice"
          oninput="this.value =
          !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : null"
          type="number" />
            </td>
            <td *ngIf="product.hassku1 == 'true' || product.hassku2 == 'true'">
              <input
              (change)="inputchange()"
              [(ngModel)]="product.mixedvari.values[i].sku"
            required
            placeholder="sku"
            name="sku"
            type="text" />
              </td>
          </tr>

        </table>

      </div>


       <!-- multi variation end -->


      <!-- <button (click)="showproductdata()">Submit</button> -->

    </div>
  </div>















  <!-- Inventory and pricing Section-->
  <div class="column">
    <div class="title">
      <h1>Inventory and pricing</h1>
    </div>

    <div class="details">
      <ng-container *ngIf="product.hasprice1 !== '' || product.hasprice2 !== ''">
        <a class="a" (click)="alerttoggle()">Set Price On Variation</a>
      </ng-container>
      <br>


      <ng-container *ngIf="product.hasprice1 == '' && product.hasprice2 == '' ">
        <label>Price</label>
      <input
          [(ngModel)]="product.price"
          required
          placeholder="Original Price"
          name="orgprice"
          oninput="this.value =
          !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : null"
          type="number" />
      </ng-container>


      <ng-container *ngIf="product.hasquantity1 !== '' || product.hasquantity2  !== ''">
        <br>
        <a class="a" (click)="alerttoggle()">Set Quantity On Variation</a>
      </ng-container>
      <br>

      <ng-container *ngIf="product.hasquantity1  == '' && product.hasquantity2  == '' ">
        <label>Quantity</label>
        <input
                [(ngModel)]="product.quantity"
                required
                placeholder="Quantity"
                name="quantity"
                oninput="this.value =
                !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : null"
                type="number" />
      </ng-container>

      <ng-container *ngIf="product.hassku1 !== '' || product.hassku2  !== ''">
        <br>
        <a class="a" (click)="alerttoggle()">Set Sku On Variation</a>
      </ng-container>
      <br>

      <ng-container *ngIf="product.hassku1  == '' && product.hassku2  == '' ">
        <label>SKU(Optional)</label>
        <input
                [(ngModel)]="product.sku"
                placeholder="sku"
                name="sku"
                type="text" />
      </ng-container>

    </div>
  </div>












  <!-- Set Discount Section-->
  <div class="column">

    <div class="title">
      <h1>Set Discount</h1>
    </div>

    <div class="details">


      <div class="leftcolumn">

        <ng-container *ngIf="product.price == null && product.hasprice1 == '' && product.hasprice2 == '' ">

          <a>Set Price First</a>

        </ng-container>

        <ng-container *ngIf="product.price  !== null || product.hasprice1 != '' || product.hasprice2 != '' " >

          <label>Set Discount</label>
          <input
                    [(ngModel)]="product.discount"
                    required
                    (change)="discountchange()"
                    (input)="discountchange()"
                    placeholder="Discount"
                    name="Discount"
                    type="number"
                    onKeyUp="if(this.value>100){this.value='100';}else if(this.value<0){this.value='0';}"
                    class="lilinput" />

          <!-- <button (click)="calculateDiscount()">Calculate Discount</button> -->

        </ng-container>

      </div>


      <div class="rightcolumn">
        <div class="discountbody">



          <!-- only price -->
          <ng-container *ngIf="product.hasprice1 !== 'true' && product.hasprice2 !== 'true' && product.hasmixedvari !== 'true' && product.discount !== null">

            <ng-container *ngIf="product.price !== null">
              <label >only price Product Price: {{ (this.product.price)?.toFixed(0) }}</label>

              <ng-container *ngIf="product.discount !== null">
              <label >Product Discount: {{ (this.product.discount)?.toFixed(0) }}%</label>
              <label >Discounted Price: {{ (this.product.price * ( (100-this.product.discount) / 100 ))?.toFixed(0) }}</label>
              </ng-container>

            </ng-container>
          </ng-container>

          <!-- for vari1 -->
          <ng-container *ngIf="product.hasprice1 == 'true' && product.hasmixedvari !== 'true' && product.discount !== null">
            <label >vari1 Product Variation: {{this.product.vari1.name}}</label>

            <ng-container *ngIf="product.discount !== null">
            <label >Product Discount: {{ (this.product.discount)?.toFixed(0) }}%</label>

            <ng-container *ngFor="let item of this.product.vari1.values">

              <label>{{item.name}} Price: {{(item.price)?.toFixed(0) }} Discounted Price: {{(item.price * ( (100-this.product.discount) / 100 ))?.toFixed(0)}}</label>

            </ng-container>
          </ng-container>
          </ng-container>


           <!-- for vari2 -->

          <ng-container *ngIf="product.hasprice2 == 'true' && product.hasmixedvari !== 'true' && product.discount !== null">
            <label >vari2 Product Variation: {{this.product.vari2.name}}</label>

            <ng-container *ngIf="product.discount !== null">
            <label >Product Discount: {{(this.product.discount)?.toFixed(0)}}%</label>

            <ng-container *ngFor="let item of this.product.vari2.values">

              <label >{{item.name}} Price: {{(item.price)?.toFixed(0) }} Discounted Price: {{(item.price * ( (100-this.product.discount) / 100 ))?.toFixed(0)}}</label>

            </ng-container>
          </ng-container>
          </ng-container>


           <!-- for multivari -->

          <ng-container *ngIf="pricemixedvari || quantitymixedvari || product.hasmixedvari == 'true' && product.discount !== null">

            <ng-container *ngIf="product.discount !== null">
            <label >multivari Product Discount: {{(this.product.discount)?.toFixed(0)}}%</label>

            <ng-container *ngFor="let item of this.product.mixedvari.values">

              <label >{{item.vari1name}}+{{item.vari2name}} Price: {{(item.price)?.toFixed(0)}} Discounted Price: {{(item.price * ( (100-this.product.discount) / 100 ))?.toFixed(0)}}</label>

            </ng-container>
          </ng-container>
          </ng-container>



        </div>
      </div>

    </div>
  </div>












<!-- Personalization Section-->
  <div class="column">
    <div class="title">
      <h1>Personalization</h1>
    </div>

    <div class="details2">

      <div class="inputs">
        <input type="checkbox"  value="personalization" (change)="onFeatureToggle($event)" [checked]="product.personalization !== ''" id="personalization" name="personalization">
        <label  class="lables" for="personalization">Add Personalization</label>
      </div>



      <div class="inputs"  *ngIf="showpersonalization">
        <input type="checkbox"  value="ispersonalization" (change)="onFeatureToggle($event)" [checked]="product.ispersonalization == 'false' " id="ispersonalization" name="ispersonalization">
        <label  class="lables" for="ispersonalization">Optional</label>
      </div>

      <div class="editor" *ngIf="showpersonalization">
        <ngx-editor
            [editor]="editor2"
            [(ngModel)]="product.personalization"
            required
            minlength="20"
            [disabled]="false">
      </ngx-editor>
      </div>

    </div>

  </div>













  <!-- Select Category section -->
  <div class="column">
    <div class="title">
      <h1>Select Category</h1>
    </div>

    <div class="details">

      <label>Product Name</label>
      <select (change)="onCateChange()" [(ngModel)]="product.cateid" class="form-control"  name="SubCate" >
        <option value="0">Select</option>
        <option *ngFor="let s of categoryes" value="{{ s.id }}" >{{ s.name }}</option>
      </select>


      <label>Product Name</label>
      <select [(ngModel)]="product.subcateid" class="form-control" name="SubSubCate" >
        <option value="0">Select</option>
        <option *ngFor="let ss of subcategoryes" value="{{ ss.id }}">{{ ss.name }}</option>
      </select>

    </div>

  </div>


  <div class="column">
    <div class="title">
      <h1>Name and Details</h1>
    </div>

    <div class="details">
      <label>Product Name</label>
      <input
          [(ngModel)]="product.name"
          placeholder="Product Name"
          name="name"
          type="text"
          required  />

      <label>Details</label>
      <div class="editor">
      <ngx-editor-menu [editor]="editor"> </ngx-editor-menu>
      <ngx-editor
            [editor]="editor"
            [(ngModel)]="product.details"
            required
            minlength="20"
            [disabled]="false">
      </ngx-editor>
      </div>

    </div>
  </div>


  <div class="column">
    <div class="title">
      <h1>Images and Video</h1>
    </div>


    <div class="details">

      <div class="margin-top">
        <span class="upload" *ngIf="progress > 0" >
          {{progress}}%
        </span>
        <span class="upload" *ngIf="message">
          {{message}}
        </span>
      </div>




      <label>Images</label>



  <ul class="imgul">
    <li>
      <div  class="files" *ngIf="product.file1 == '' "   >
        <input accept=".jpg,.png,.jpeg,.webp" type="file" #file placeholder="Choose file" (change)="uploadFile(file.files,1)" style="display:none;">
        <img class="upload"  (click)="file.click()" src="./assets/upload.png" alt="">
      </div>

      <div  class="files" *ngIf="product.file1 !== '' ">
        <p ><img src="{{imglink+product.file1}}" alt=""></p>
        <div class="delete">
          <p (click)="deleteimage(product.file1,1)">Delete</p>
        </div>
      </div>

    </li>


    <li>
      <div  class="files" *ngIf="product.file2 == '' " >
        <input accept=".jpg,.png,.jpeg,.webp" type="file" #file placeholder="Choose file" (change)="uploadFile(file.files,2)" style="display:none;">
        <img class="upload"  (click)="file.click()" src="./assets/upload.png" alt="">
      </div>

      <div class="files" *ngIf="product.file2 !== '' ">
        <p ><img src="{{imglink+product.file2}}" alt=""></p>
        <div class="delete">
          <p (click)="deleteimage(product.file2,2)">Delete</p>
        </div>
      </div>

    </li>


    <li>
      <div class="files" *ngIf="product.file3 == '' " >
        <input accept=".jpg,.png,.jpeg,.webp" type="file" #file placeholder="Choose file" (change)="uploadFile(file.files,3)" style="display:none;">
        <img class="upload"  (click)="file.click()" src="./assets/upload.png" alt="">
      </div>

      <div class="files" *ngIf="product.file3 !== '' ">
        <p ><img src="{{imglink+product.file3}}" alt=""></p>
        <div class="delete">
          <p (click)="deleteimage(product.file3,3)">Delete</p>
        </div>
      </div>

    </li>

    <li>
      <div  *ngIf="product.file4 == '' " class="files">
        <input accept=".jpg,.png,.jpeg,.webp" type="file" #file placeholder="Choose file" (change)="uploadFile(file.files,4)" style="display:none;">
        <img class="upload"  (click)="file.click()" src="./assets/upload.png" alt="">
      </div>

      <div class="files" *ngIf="product.file4 !== '' ">
        <p ><img src="{{imglink+product.file4}}" alt=""></p>
        <div class="delete">
          <p (click)="deleteimage(product.file4,4)">Delete</p>
        </div>
      </div>

    </li>

    <li>
      <div  *ngIf="product.file5 == '' " class="files" >
        <input accept=".jpg,.png,.jpeg,.webp" type="file" #file placeholder="Choose file" (change)="uploadFile(file.files,5)" style="display:none;">
        <img class="upload"  (click)="file.click()" src="./assets/upload.png" alt="">
      </div>

      <div *ngIf="product.file5 !== '' " class="files">
        <p ><img src="{{imglink+product.file5}}" alt=""></p>
        <div class="delete">
          <p (click)="deleteimage(product.file5,5)">Delete</p>
        </div>
      </div>

    </li>

    <li>
      <div  *ngIf="product.file6 == '' " class="files">
        <input accept=".jpg,.png,.jpeg,.webp" type="file" #file placeholder="Choose file" (change)="uploadFile(file.files,6)" style="display:none;">
        <img class="upload"  (click)="file.click()" src="./assets/upload.png" alt="">
      </div>

      <div *ngIf="product.file6 !== '' " class="files">
        <p ><img src="{{imglink+product.file6}}" alt=""></p>
        <div class="delete">
          <p (click)="deleteimage(product.file6,6)">Delete</p>
        </div>
      </div>

    </li>

    <li>
      <div  *ngIf="product.file7 == '' " class="files">
        <input accept=".jpg,.png,.jpeg,.webp" type="file" #file placeholder="Choose file" (change)="uploadFile(file.files,7)" style="display:none;">
        <img class="upload"  (click)="file.click()" src="./assets/upload.png" alt="">
      </div>

      <div *ngIf="product.file7 !== '' " class="files">
        <p ><img src="{{imglink+product.file7}}" alt=""></p>
        <div class="delete">
          <p (click)="deleteimage(product.file7,7)">Delete</p>
        </div>
      </div>

    </li>

    <li>
      <div  *ngIf="product.file8 == '' " class="files">
        <input accept=".jpg,.png,.jpeg,.webp" type="file" #file placeholder="Choose file" (change)="uploadFile(file.files,8)" style="display:none;">
        <img class="upload"  (click)="file.click()" src="./assets/upload.png" alt="">
      </div>

      <div *ngIf="product.file8 !== '' " class="files">
        <p ><img src="{{imglink+product.file8}}" alt=""></p>
        <div class="delete">
          <p (click)="deleteimage(product.file8,8)">Delete</p>
        </div>
      </div>

    </li>

  </ul>


    </div>

  </div>



  <div class="column">
    <button *ngIf="product.id == 0" (click)="createProduct()" >Create Product</button>
    <button *ngIf="product.id !== 0"  (click)="createProduct()" >Update Product</button>
  </div>




</div>
